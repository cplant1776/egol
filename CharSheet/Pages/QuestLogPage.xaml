<Page
    x:Class="CharSheet.Pages.QuestLogPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:CharSheet.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="QuestLogPage"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="3*" />
        </Grid.ColumnDefinitions>

        <!--  Select Quest  -->
        <StackPanel>
            <ScrollViewer>
                <StackPanel>
                    <Expander Header="Current Quests">
                        <ListView
                            x:Name="CurrentQuestsList"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom"
                            SelectionChanged="UpdateSelectedQuest"
                            SelectionMode="Single" />
                    </Expander>
                    <Expander Header="Accepted Quests">
                        <ListView
                            x:Name="AcceptedQuestsList"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom" />
                    </Expander>
                    <Expander Header="Completed Quests">
                        <ListView
                            x:Name="CompleteQuestsList"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom" />
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </StackPanel>

        <!--  Display Quest Info  -->
        <Grid Grid.Column="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="2*" />
                <RowDefinition Height="3*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="2*" />
                </Grid.ColumnDefinitions>

                <!--  Contact Info  -->
                <StackPanel Grid.Column="0">
                    <Image x:Name="ContactImage" HorizontalAlignment="Center" />
                    <TextBlock
                        x:Name="ContactName"
                        HorizontalAlignment="Center"
                        FontSize="26"
                        Text="{Binding SelectedContact.Name, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Page}}" />
                    <ProgressBar
                        x:Name="ContactReputationBar"
                        Height="20"
                        Margin="10"
                        Maximum="100"
                        Minimum="-100"
                        Value="{Binding SelectedContact.Reputation, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Page}}" />
                    <TextBlock
                        x:Name="ContactReputationString"
                        HorizontalAlignment="Center"
                        FontSize="26"
                        Text="{Binding ElementName=ContactReputationBar, Path=Value}" />
                </StackPanel>

                <!--  Quest Meta Info  -->
                <Grid Grid.Column="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <TextBlock
                        x:Name="QuestTitle"
                        Grid.Row="0"
                        Grid.Column="0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Bottom"
                        FontSize="26"
                        Text="{Binding SelectedQuest.Title, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Page}}" />
                    <TextBlock
                        x:Name="QuestXPValue"
                        Grid.Row="0"
                        Grid.Column="1"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Bottom"
                        FontSize="26"
                        Text="{Binding SelectedQuest.XPValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Page}}" />

                    <TextBlock
                        Grid.Row="1"
                        Grid.Column="0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Bottom"
                        FontSize="26"
                        Text="DUE: " />
                    <TextBlock
                        x:Name="QuestDeadline"
                        Grid.Row="1"
                        Grid.Column="1"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Bottom"
                        FontSize="26"
                        Text="XXXX/YY/ZZ" />
                </Grid>

            </Grid>

            <!--  Quest Description  -->
            <StackPanel Grid.Row="1">
                <TextBlock
                    HorizontalAlignment="Center"
                    FontSize="26"
                    Text="Description" />
                <ScrollViewer VerticalAlignment="Stretch">
                    <TextBlock
                        x:Name="QuestDescription"
                        FontSize="16"
                        Text="{Binding SelectedQuest.Description, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Page}}"
                        TextWrapping="Wrap" />
                </ScrollViewer>

            </StackPanel>

            <!--  Buttons  -->
            <Button
                x:Name="CompleteButton"
                Grid.Row="2"
                Margin="10"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Click="Complete_Click"
                Content="Complete"
                FontSize="26" />

        </Grid>

    </Grid>
</Page>
